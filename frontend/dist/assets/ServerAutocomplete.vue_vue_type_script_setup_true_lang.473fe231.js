import{g as f}from"./get.6ae3cd4c.js";import{j as g}from"./dayjs.30fb8bef.js";import{d as V,y as t,o as k,e as C,r as S}from"./index.af12006a.js";const T=V({__name:"ServerAutocomplete",props:{modelValue:null,modelValueId:null,itemValue:{default:"id"},itemTitle:{default:"name"},placeholder:null,disabled:{type:Boolean},label:null,error:{type:Boolean},errorMessages:null,fetch:null,filter:null},emits:["update:model-value-id","update:model-value","update:loading"],setup(e,{emit:n}){const a=e,o=t(!1),r=t(""),s=t(0),c=t(10),m=t(!1),i=t([]),v=l=>{n("update:model-value",l),l?n("update:model-value-id",f(l,a.itemValue)):n("update:model-value-id",null)},p=()=>{v(null)},h=g(async l=>{if(l===f(a.modelValue,a.itemTitle))return;o.value=!0;const u=await a.fetch({limit:c.value,offset:s.value,search:l});u.total<=s.value+c.value&&m.value;const d=a.filter?u.rows.filter(a.filter):u.rows;i.value=d,o.value=!1},200),b=l=>{i.value=[],m.value=!1,s.value=0,r.value=l,r.value&&(o.value||h(r.value))};return(l,u)=>{const d=S("v-autocomplete");return k(),C(d,{"model-value":e.modelValue,items:i.value,loading:o.value,"search-input":r.value,placeholder:e.placeholder,"item-title":e.itemTitle,"item-value":e.itemValue,label:e.label,disabled:e.disabled,error:e.error,"error-messages":e.errorMessages,clearable:"","return-object":"","hide-no-data":"","no-filter":"","onUpdate:modelValue":v,"onUpdate:search":b,"onClick:clear":p},null,8,["model-value","items","loading","search-input","placeholder","item-title","item-value","label","disabled","error","error-messages"])}}});export{T as _};
