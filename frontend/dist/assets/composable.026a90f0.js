import{u as _,j as h,M as C,O as P,E as o,y,C as Y,h as g,R as r,N as i}from"./index.af12006a.js";import{u as N,f as R,a as S,r as I,b as c}from"./dayjs.30fb8bef.js";const U=s=>{var A;const u=_(),{t}=h(),d=g(),v=C(),f=P(),m=o(()=>r[i.EMPLOYEE_COLUMN_LIST]),n=p=>r[i.EMPLOYEE_COLUMN_VIEW](p),a=o(()=>s.value?n(s.value):m.value),e=y(!1),l=Y({userId:(A=u.user)==null?void 0:A.id,title:""}),M=o(()=>({userId:{required:I},title:{required:I}})),E=N(M,l),L=o(()=>[{key:"save",text:t("actions.save"),buttonType:"submit",type:"PRIMARY",loading:e.value},{key:"cancel",text:t("actions.cancel"),to:a.value}]);return{loading:e,model:l,v$:E,actions:L,save:async()=>{if(!!await E.value.$validate())return v.confirm(t("dialogs.saveConfirm"),()=>(e.value=!0,(s.value?c.columns._id.put(s.value,l).then(()=>s.value):c.columns._id.post(l)).then(b=>(f.success(t("alerts.saveSuccess")),d.push(n(b)))).finally(()=>{e.value=!1})))},fetch:()=>(e.value=!0,c.columns._id.get(s.value).then(p=>Object.assign(l,p)).finally(()=>e.value=!1))}},w=()=>{const s=_(),{t:u}=h(),t=g(),d=o(()=>r[i.EMPLOYEE_COLUMN_CREATOR]),v=e=>r[i.EMPLOYEE_COLUMN_VIEW](e),f=y([{key:"title",orderKey:"title",title:u("fields.title")},{key:"createdAt",orderKey:"created_at",title:u("fields.createdAt"),format:R},{key:"updatedAt",title:u("fields.updatedAt"),format:R}]),m=S({order:"created_at desc",page:1,pageSize:10,fetch:c.columns.get,additionalParams:()=>{var e;return{userId:(e=s.user)==null?void 0:e.id}}}),n=o(()=>[{key:"create",to:d.value,text:u("actions.create"),type:"PRIMARY",prependIcon:"mdi-plus"}]);return{columns:f,table:m,actions:n,onRowClick:e=>t.push(v(e))}},j=s=>{var O;const u=_(),{t}=h(),d=g(),v=C(),f=P(),m=o(()=>r[i.EMPLOYEE_COLUMN_EDITOR](s.value)),n=o(()=>r[i.EMPLOYEE_COLUMN_LIST]),a=y(!1),e=Y({userId:(O=u.user)==null?void 0:O.id,title:""}),l=y([{key:"title",title:t("fields.title")},{key:"createdAt",title:t("fields.createdAt"),format:R},{key:"updatedAt",title:t("fields.updatedAt"),format:R}]),M=o(()=>[{key:"edit",text:t("actions.edit"),to:m.value,type:"PRIMARY"},{key:"remove",text:t("actions.remove"),click:E,type:"ERROR",loading:a.value},{key:"cancel",text:t("actions.toList"),to:n.value}]),E=()=>v.confirm(t("dialogs.removeConfirm"),()=>(a.value=!0,c.columns._id.delete(s.value).then(()=>(f.success(t("alerts.removeSuccess")),d.push(n.value))).finally(()=>{a.value=!1})));return{loading:a,model:e,fields:l,actions:M,fetch:()=>(a.value=!0,c.columns._id.get(s.value).then(k=>Object.assign(e,k)).finally(()=>a.value=!1))}};export{U as a,j as b,w as u};
