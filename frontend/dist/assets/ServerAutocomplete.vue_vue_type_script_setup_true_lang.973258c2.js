import{g as C}from"./get.19b8b80d.js";import{j as W,k as M,c as j}from"./dayjs.b55bd095.js";import{d as A,x as h,o as L,e as _,r as w}from"./index.7c99f015.js";var U=W,R=function(){return U.Date.now()},F=R,D=/\s/;function H(e){for(var t=e.length;t--&&D.test(e.charAt(t)););return t}var P=H,X=P,q=/^\s+/;function z(e){return e&&e.slice(0,X(e)+1).replace(q,"")}var G=z,J=G,V=M,K=j,$=0/0,Q=/^[-+]0x[0-9a-f]+$/i,Y=/^0b[01]+$/i,Z=/^0o[0-7]+$/i,ee=parseInt;function te(e){if(typeof e=="number")return e;if(K(e))return $;if(V(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=V(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=J(e);var a=Y.test(e);return a||Z.test(e)?ee(e.slice(2),a?2:8):Q.test(e)?$:+e}var ne=te,ae=M,y=F,B=ne,re="Expected a function",ie=Math.max,le=Math.min;function oe(e,t,a){var i,u,d,s,r,l,c=0,x=!1,f=!1,g=!0;if(typeof e!="function")throw new TypeError(re);t=B(t)||0,ae(a)&&(x=!!a.leading,f="maxWait"in a,d=f?ie(B(a.maxWait)||0,t):d,g="trailing"in a?!!a.trailing:g);function p(n){var m=i,T=u;return i=u=void 0,c=n,s=e.apply(T,m),s}function o(n){return c=n,r=setTimeout(I,t),x?p(n):s}function v(n){var m=n-l,T=n-c,E=t-m;return f?le(E,d-T):E}function b(n){var m=n-l,T=n-c;return l===void 0||m>=t||m<0||f&&T>=d}function I(){var n=y();if(b(n))return S(n);r=setTimeout(I,v(n))}function S(n){return r=void 0,g&&i?p(n):(i=u=void 0,s)}function O(){r!==void 0&&clearTimeout(r),c=0,i=l=u=r=void 0}function N(){return r===void 0?s:S(y())}function k(){var n=y(),m=b(n);if(i=arguments,u=this,l=n,m){if(r===void 0)return o(l);if(f)return clearTimeout(r),r=setTimeout(I,t),p(l)}return r===void 0&&(r=setTimeout(I,t)),s}return k.cancel=O,k.flush=N,k}var ue=oe;const me=A({__name:"ServerAutocomplete",props:{modelValue:null,modelValueId:null,itemValue:{default:"id"},itemTitle:{default:"name"},placeholder:null,disabled:{type:Boolean},label:null,error:{type:Boolean},errorMessages:null,fetch:null,filter:null},emits:["update:model-value-id","update:model-value","update:loading"],setup(e,{emit:t}){const a=e,i=h(!1),u=h(""),d=h(0),s=h(10),r=h(!1),l=h([]),c=o=>{t("update:model-value",o),o?t("update:model-value-id",C(o,a.itemValue)):t("update:model-value-id",null)},x=()=>{c(null)},g=ue(async o=>{if(o===C(a.modelValue,a.itemTitle))return;i.value=!0;const v=await a.fetch({limit:s.value,offset:d.value,search:o});v.total<=d.value+s.value&&r.value;const b=a.filter?v.rows.filter(a.filter):v.rows;l.value=b,i.value=!1},200),p=o=>{l.value=[],r.value=!1,d.value=0,u.value=o,u.value&&(i.value||g(u.value))};return(o,v)=>{const b=w("v-autocomplete");return L(),_(b,{"model-value":e.modelValue,items:l.value,loading:i.value,"search-input":u.value,placeholder:e.placeholder,"item-title":e.itemTitle,"item-value":e.itemValue,label:e.label,disabled:e.disabled,error:e.error,"error-messages":e.errorMessages,clearable:"","return-object":"","hide-no-data":"","no-filter":"","onUpdate:modelValue":c,"onUpdate:search":p,"onClick:clear":x},null,8,["model-value","items","loading","search-input","placeholder","item-title","item-value","label","disabled","error","error-messages"])}}});export{me as _};
