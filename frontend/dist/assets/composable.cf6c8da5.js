import{j as _,M as A,O as T,D as u,x as p,B as L,h as k,R as r,N as c}from"./index.7c99f015.js";import{u as Y,f as y,a as x,r as h,b as i}from"./dayjs.b55bd095.js";const U=(a,e)=>{const{t}=_(),v=k(),d=A(),f=T(),E=u(()=>r[c.EMPLOYEE_ROUTE_LIST](a.value)),l=R=>r[c.EMPLOYEE_ROUTE_VIEW](a.value,R),o=u(()=>e.value?l(e.value):E.value),s=p(!1),n=L({columnId:a.value,num:""}),O=u(()=>({columnId:{required:h},num:{required:h}})),m=Y(O,n),g=u(()=>[{key:"save",text:t("actions.save"),buttonType:"submit",type:"PRIMARY",loading:s.value},{key:"cancel",text:t("actions.cancel"),to:o.value}]);return{loading:s,model:n,v$:m,actions:g,save:async()=>{if(!!await m.value.$validate())return d.confirm(t("dialogs.saveConfirm"),()=>(s.value=!0,(e.value?i.routes._id.put(e.value,n).then(()=>e.value):i.routes._id.post(n)).then(P=>(f.success(t("alerts.saveSuccess")),v.push(l(P)))).finally(()=>{s.value=!1})))},fetch:()=>(s.value=!0,i.routes._id.get(e.value).then(R=>Object.assign(n,R)).finally(()=>s.value=!1))}},S=a=>{const{t:e}=_(),t=k(),v=u(()=>r[c.EMPLOYEE_ROUTE_CREATOR](a.value)),d=s=>r[c.EMPLOYEE_ROUTE_VIEW](a.value,s),f=p([{key:"id",title:e("fields.id")},{key:"num",title:e("fields.num")},{key:"createdAt",title:e("fields.createdAt"),format:y},{key:"updatedAt",title:e("fields.updatedAt"),format:y}]),E=x({order:"created_at desc",page:1,pageSize:10,fetch:i.routes.get,additionalParams:()=>({columnId:a.value})}),l=u(()=>[{key:"create",to:v.value,text:e("actions.create"),type:"PRIMARY",prependIcon:"mdi-plus"},{key:"toColumn",to:r[c.EMPLOYEE_COLUMN_VIEW](a.value),text:e("actions.toColumn")}]);return{columns:f,table:E,actions:l,onRowClick:s=>t.push(d(s))}},w=(a,e)=>{const{t}=_(),v=k(),d=A(),f=T(),E=u(()=>r[c.EMPLOYEE_ROUTE_EDITOR](a.value,e.value)),l=u(()=>r[c.EMPLOYEE_ROUTE_LIST](a.value)),o=p(!1),s=L({columnId:a.value,num:""}),n=p([{key:"id",title:t("fields.id")},{key:"num",title:t("fields.num")},{key:"createdAt",title:t("fields.createdAt"),format:y},{key:"updatedAt",title:t("fields.updatedAt"),format:y}]),O=u(()=>[{key:"edit",text:t("actions.edit"),to:E.value,type:"PRIMARY"},{key:"remove",text:t("actions.remove"),click:m,type:"ERROR",loading:o.value},{key:"cancel",text:t("actions.toList"),to:l.value}]),m=()=>d.confirm(t("dialogs.removeConfirm"),()=>(o.value=!0,i.routes._id.delete(e.value).then(()=>(f.success(t("alerts.removeSuccess")),v.push(l.value))).finally(()=>{o.value=!1})));return{loading:o,model:s,fields:n,actions:O,fetch:()=>(o.value=!0,i.routes._id.get(e.value).then(M=>Object.assign(s,M)).finally(()=>o.value=!1))}};export{U as a,w as b,S as u};
