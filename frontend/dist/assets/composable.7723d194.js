import{j as M,M as O,O as b,E as o,y as _,C as A,R as u,N as r,h}from"./index.668956d2.js";import{u as P,f as k,a as V,r as R,b as d}from"./dayjs.c94eb01b.js";const C=(s,e)=>{const{t}=M(),v=h(),f=O(),m=b(),E=o(()=>u[r.EMPLOYEE_DRIVER_LIST](s.value)),n=p=>u[r.EMPLOYEE_DRIVER_VIEW](s.value,p),l=o(()=>e.value?n(e.value):E.value),a=_(!1),i=A({columnId:s.value,busId:void 0,graphic:void 0,num:"",fullName:""}),g=o(()=>({columnId:{required:R},busId:{required:R},graphic:{required:R},num:{required:R},fullName:{required:R}})),y=P(g,i),I=o(()=>[{key:"save",text:t("actions.save"),buttonType:"submit",type:"PRIMARY",loading:a.value},{key:"cancel",text:t("actions.cancel"),to:l.value}]);return{loading:a,model:i,v$:y,actions:I,save:async()=>{if(!!await y.value.$validate())return f.confirm(t("dialogs.saveConfirm"),()=>(a.value=!0,(e.value?d.drivers._id.put(e.value,i).then(()=>e.value):d.drivers._id.post(i)).then(L=>(m.success(t("alerts.saveSuccess")),v.push(n(L)))).finally(()=>{a.value=!1})))},fetch:()=>(a.value=!0,d.drivers._id.get(e.value).then(p=>Object.assign(i,p)).finally(()=>a.value=!1))}},S=s=>{const{t:e}=M(),t=h(),v=o(()=>u[r.EMPLOYEE_DRIVER_CREATOR](s.value)),f=a=>u[r.EMPLOYEE_DRIVER_VIEW](s.value,a),m=_([{key:"id",title:e("fields.id")},{key:"bus",orderKey:"buses.num",title:e("fields.bus"),format:a=>a.num,to:a=>u[r.EMPLOYEE_BUS_VIEW](s.value,a.id)},{key:"num",orderKey:"num",title:e("fields.num")},{key:"fullName",orderKey:"full_name",title:e("fields.fullName")},{key:"createdAt",orderKey:"created_at",title:e("fields.createdAt"),format:k},{key:"updatedAt",title:e("fields.updatedAt"),format:k}]),E=V({order:"created_at desc",page:1,pageSize:10,fetch:d.drivers.get,additionalParams:()=>({columnId:s.value})}),n=o(()=>[{key:"create",to:v.value,text:e("actions.create"),type:"PRIMARY",prependIcon:"mdi-plus"},{key:"toColumn",to:u[r.EMPLOYEE_COLUMN_VIEW](s.value),text:e("actions.toColumn")}]);return{columns:m,table:E,actions:n,onRowClick:a=>t.push(f(a))}},x=(s,e)=>{const{t}=M(),v=h(),f=O(),m=b(),E=o(()=>u[r.EMPLOYEE_DRIVER_EDITOR](s.value,e.value)),n=o(()=>u[r.EMPLOYEE_DRIVER_LIST](s.value)),l=_(!1),a=A({columnId:s.value,busId:void 0,graphic:void 0,num:"",fullName:""}),i=_([{key:"id",title:t("fields.id")},{key:"bus",title:t("fields.bus"),format:c=>c.num,to:c=>u[r.EMPLOYEE_BUS_VIEW](s.value,c.id)},{key:"num",title:t("fields.num")},{key:"fullName",title:t("fields.fullName")},{key:"createdAt",title:t("fields.createdAt"),format:k},{key:"updatedAt",title:t("fields.updatedAt"),format:k}]),g=o(()=>[{key:"edit",text:t("actions.edit"),to:E.value,type:"PRIMARY"},{key:"remove",text:t("actions.remove"),click:y,type:"ERROR",loading:l.value},{key:"cancel",text:t("actions.toList"),to:n.value}]),y=()=>f.confirm(t("dialogs.removeConfirm"),()=>(l.value=!0,d.drivers._id.delete(e.value).then(()=>(m.success(t("alerts.removeSuccess")),v.push(n.value))).finally(()=>{l.value=!1})));return{loading:l,model:a,fields:i,actions:g,fetch:()=>(l.value=!0,d.drivers._id.get(e.value).then(c=>Object.assign(a,c)).finally(()=>l.value=!1))}};export{C as a,x as b,S as u};
