import{u as _,j as h,M as C,O as P,E as l,y as p,C as Y,h as k,R as r,N as i}from"./index.668956d2.js";import{u as N,f as R,a as S,r as I,b as c}from"./dayjs.c94eb01b.js";const U=s=>{var A;const a=_(),{t:e}=h(),d=k(),v=C(),f=P(),m=l(()=>r[i.EMPLOYEE_COLUMN_LIST]),u=E=>r[i.EMPLOYEE_COLUMN_VIEW](E),o=l(()=>s.value?u(s.value):m.value),t=p(!1),n=Y({userId:(A=a.user)==null?void 0:A.id,title:""}),M=l(()=>({userId:{required:I},title:{required:I}})),y=N(M,n),g=l(()=>[{key:"save",text:e("actions.save"),buttonType:"submit",type:"PRIMARY",loading:t.value},{key:"cancel",text:e("actions.cancel"),to:o.value}]);return{loading:t,model:n,v$:y,actions:g,save:async()=>{if(!!await y.value.$validate())return v.confirm(e("dialogs.saveConfirm"),()=>(t.value=!0,(s.value?c.columns._id.put(s.value,n).then(()=>s.value):c.columns._id.post(n)).then(b=>(f.success(e("alerts.saveSuccess")),d.push(u(b)))).finally(()=>{t.value=!1})))},fetch:()=>(t.value=!0,c.columns._id.get(s.value).then(E=>Object.assign(n,E)).finally(()=>t.value=!1))}},w=()=>{const s=_(),{t:a}=h(),e=k(),d=l(()=>r[i.EMPLOYEE_COLUMN_CREATOR]),v=t=>r[i.EMPLOYEE_COLUMN_VIEW](t),f=p([{key:"id",title:a("fields.id")},{key:"title",orderKey:"title",title:a("fields.title")},{key:"createdAt",orderKey:"created_at",title:a("fields.createdAt"),format:R},{key:"updatedAt",title:a("fields.updatedAt"),format:R}]),m=S({order:"created_at desc",page:1,pageSize:10,fetch:c.columns.get,additionalParams:()=>{var t;return{userId:(t=s.user)==null?void 0:t.id}}}),u=l(()=>[{key:"create",to:d.value,text:a("actions.create"),type:"PRIMARY",prependIcon:"mdi-plus"}]);return{columns:f,table:m,actions:u,onRowClick:t=>e.push(v(t))}},j=s=>{var O;const a=_(),{t:e}=h(),d=k(),v=C(),f=P(),m=l(()=>r[i.EMPLOYEE_COLUMN_EDITOR](s.value)),u=l(()=>r[i.EMPLOYEE_COLUMN_LIST]),o=p(!1),t=Y({userId:(O=a.user)==null?void 0:O.id,title:""}),n=p([{key:"id",title:e("fields.id")},{key:"title",title:e("fields.title")},{key:"createdAt",title:e("fields.createdAt"),format:R},{key:"updatedAt",title:e("fields.updatedAt"),format:R}]),M=l(()=>[{key:"edit",text:e("actions.edit"),to:m.value,type:"PRIMARY"},{key:"remove",text:e("actions.remove"),click:y,type:"ERROR",loading:o.value},{key:"cancel",text:e("actions.toList"),to:u.value}]),y=()=>v.confirm(e("dialogs.removeConfirm"),()=>(o.value=!0,c.columns._id.delete(s.value).then(()=>(f.success(e("alerts.removeSuccess")),d.push(u.value))).finally(()=>{o.value=!1})));return{loading:o,model:t,fields:n,actions:M,fetch:()=>(o.value=!0,c.columns._id.get(s.value).then(L=>Object.assign(t,L)).finally(()=>o.value=!1))}};export{U as a,j as b,w as u};
