import{j as k,M as b,O as h,D as u,x as R,B as L,R as l,N as n,h as M}from"./index.7c99f015.js";import{u as S,f as _,a as Y,r as A,b as v}from"./dayjs.b55bd095.js";const C=(s,e)=>{const{t}=k(),d=M(),f=b(),E=h(),m=u(()=>l[n.EMPLOYEE_BUS_LIST](s.value)),r=p=>l[n.EMPLOYEE_BUS_VIEW](s.value,p),o=u(()=>e.value?r(e.value):m.value),a=R(!1),i=L({columnId:s.value,gateId:void 0,num:""}),g=u(()=>({columnId:{required:A},num:{required:A}})),y=S(g,i),O=u(()=>[{key:"save",text:t("actions.save"),buttonType:"submit",type:"PRIMARY",loading:a.value},{key:"cancel",text:t("actions.cancel"),to:o.value}]);return{loading:a,model:i,v$:y,actions:O,save:async()=>{if(!!await y.value.$validate())return f.confirm(t("dialogs.saveConfirm"),()=>(a.value=!0,(e.value?v.buses._id.put(e.value,i).then(()=>e.value):v.buses._id.post(i)).then(P=>(E.success(t("alerts.saveSuccess")),d.push(r(P)))).finally(()=>{a.value=!1})))},fetch:()=>(a.value=!0,v.buses._id.get(e.value).then(p=>Object.assign(i,p)).finally(()=>a.value=!1))}},U=s=>{const{t:e}=k(),t=M(),d=u(()=>l[n.EMPLOYEE_BUS_CREATOR](s.value)),f=a=>l[n.EMPLOYEE_BUS_VIEW](s.value,a),E=R([{key:"id",title:e("fields.id")},{key:"gate",title:e("fields.gate"),format:a=>a.num,to:a=>l[n.EMPLOYEE_GATE_VIEW](s.value,a.id)},{key:"num",title:e("fields.num")},{key:"createdAt",title:e("fields.createdAt"),format:_},{key:"updatedAt",title:e("fields.updatedAt"),format:_}]),m=Y({order:"created_at desc",page:1,pageSize:10,fetch:v.buses.get,additionalParams:()=>({columnId:s.value})}),r=u(()=>[{key:"create",to:d.value,text:e("actions.create"),type:"PRIMARY",prependIcon:"mdi-plus"},{key:"toColumn",to:l[n.EMPLOYEE_COLUMN_VIEW](s.value),text:e("actions.toColumn")}]);return{columns:E,table:m,actions:r,onRowClick:a=>t.push(f(a))}},B=(s,e)=>{const{t}=k(),d=M(),f=b(),E=h(),m=u(()=>l[n.EMPLOYEE_BUS_EDITOR](s.value,e.value)),r=u(()=>l[n.EMPLOYEE_BUS_LIST](s.value)),o=R(!1),a=L({columnId:s.value,gateId:void 0,num:""}),i=R([{key:"id",title:t("fields.id")},{key:"gate",title:t("fields.gate"),format:c=>c.num,to:c=>l[n.EMPLOYEE_GATE_VIEW](s.value,c.id)},{key:"num",title:t("fields.num")},{key:"createdAt",title:t("fields.createdAt"),format:_},{key:"updatedAt",title:t("fields.updatedAt"),format:_}]),g=u(()=>[{key:"edit",text:t("actions.edit"),to:m.value,type:"PRIMARY"},{key:"remove",text:t("actions.remove"),click:y,type:"ERROR",loading:o.value},{key:"cancel",text:t("actions.toList"),to:r.value}]),y=()=>f.confirm(t("dialogs.removeConfirm"),()=>(o.value=!0,v.buses._id.delete(e.value).then(()=>(E.success(t("alerts.removeSuccess")),d.push(r.value))).finally(()=>{o.value=!1})));return{loading:o,model:a,fields:i,actions:g,fetch:()=>(o.value=!0,v.buses._id.get(e.value).then(c=>Object.assign(a,c)).finally(()=>o.value=!1))}};export{C as a,B as b,U as u};
