import{j as _,M as A,O as T,E as u,y as p,C as L,h as g,R as r,N as c}from"./index.e656cd4f.js";import{u as Y,f as y,a as C,r as h,b as i}from"./dayjs.6430883b.js";const U=(s,e)=>{const{t}=_(),v=g(),d=A(),E=T(),f=u(()=>r[c.EMPLOYEE_ROUTE_LIST](s.value)),n=R=>r[c.EMPLOYEE_ROUTE_VIEW](s.value,R),o=u(()=>e.value?n(e.value):f.value),a=p(!1),l=L({columnId:s.value,num:""}),O=u(()=>({columnId:{required:h},num:{required:h}})),m=Y(O,l),k=u(()=>[{key:"save",text:t("actions.save"),buttonType:"submit",type:"PRIMARY",loading:a.value},{key:"cancel",text:t("actions.cancel"),to:o.value}]);return{loading:a,model:l,v$:m,actions:k,save:async()=>{if(!!await m.value.$validate())return d.confirm(t("dialogs.saveConfirm"),()=>(a.value=!0,(e.value?i.routes._id.put(e.value,l).then(()=>e.value):i.routes._id.post(l)).then(P=>(E.success(t("alerts.saveSuccess")),v.push(n(P)))).finally(()=>{a.value=!1})))},fetch:()=>(a.value=!0,i.routes._id.get(e.value).then(R=>Object.assign(l,R)).finally(()=>a.value=!1))}},S=s=>{const{t:e}=_(),t=g(),v=u(()=>r[c.EMPLOYEE_ROUTE_CREATOR](s.value)),d=a=>r[c.EMPLOYEE_ROUTE_VIEW](s.value,a),E=p([{key:"num",orderKey:"num",title:e("fields.num")},{key:"createdAt",orderKey:"created_at",title:e("fields.createdAt"),format:y},{key:"updatedAt",title:e("fields.updatedAt"),format:y}]),f=C({order:"created_at desc",page:1,pageSize:10,fetch:i.routes.get,additionalParams:()=>({columnId:s.value})}),n=u(()=>[{key:"create",to:v.value,text:e("actions.create"),type:"PRIMARY",prependIcon:"mdi-plus"},{key:"toColumn",to:r[c.EMPLOYEE_COLUMN_VIEW](s.value),text:e("actions.toColumn")}]);return{columns:E,table:f,actions:n,onRowClick:a=>t.push(d(a))}},w=(s,e)=>{const{t}=_(),v=g(),d=A(),E=T(),f=u(()=>r[c.EMPLOYEE_ROUTE_EDITOR](s.value,e.value)),n=u(()=>r[c.EMPLOYEE_ROUTE_LIST](s.value)),o=p(!1),a=L({columnId:s.value,num:""}),l=p([{key:"num",title:t("fields.num")},{key:"createdAt",title:t("fields.createdAt"),format:y},{key:"updatedAt",title:t("fields.updatedAt"),format:y}]),O=u(()=>[{key:"edit",text:t("actions.edit"),to:f.value,type:"PRIMARY"},{key:"remove",text:t("actions.remove"),click:m,type:"ERROR",loading:o.value},{key:"cancel",text:t("actions.toList"),to:n.value}]),m=()=>d.confirm(t("dialogs.removeConfirm"),()=>(o.value=!0,i.routes._id.delete(e.value).then(()=>(E.success(t("alerts.removeSuccess")),v.push(n.value))).finally(()=>{o.value=!1})));return{loading:o,model:a,fields:l,actions:O,fetch:()=>(o.value=!0,i.routes._id.get(e.value).then(M=>Object.assign(a,M)).finally(()=>o.value=!1))}};export{U as a,w as b,S as u};
