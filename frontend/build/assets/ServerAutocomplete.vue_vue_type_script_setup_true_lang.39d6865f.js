import{g as f}from"./get.27893b87.js";import{j as g}from"./dayjs.53327d04.js";import{d as V,y as t,o as k,e as C,r as S}from"./index.4a902064.js";const T=V({__name:"ServerAutocomplete",props:{modelValue:null,modelValueId:null,itemValue:{default:"id"},itemTitle:{default:"name"},placeholder:null,disabled:{type:Boolean},label:null,error:{type:Boolean},errorMessages:null,fetch:null,filter:null,mapper:null},emits:["update:model-value-id","update:model-value","update:loading"],setup(e,{emit:s}){const a=e,o=t(!1),r=t(""),i=t(0),c=t(10),m=t(!1),d=t([]),v=l=>{s("update:model-value",l),l?s("update:model-value-id",f(l,a.itemValue)):s("update:model-value-id",null)},p=()=>{v(null)},h=g(async l=>{if(l===f(a.modelValue,a.itemTitle))return;o.value=!0;const u=await a.fetch({limit:c.value,offset:i.value,search:l});u.total<=i.value+c.value&&m.value;const n=a.filter?u.rows.filter(a.filter):u.rows;d.value=a.mapper?n.map(a.mapper):n,o.value=!1},200),b=l=>{d.value=[],m.value=!1,i.value=0,r.value=l,r.value&&(o.value||h(r.value))};return(l,u)=>{const n=S("v-autocomplete");return k(),C(n,{"model-value":e.modelValue,items:d.value,loading:o.value,"search-input":r.value,placeholder:e.placeholder,"item-title":e.itemTitle,"item-value":e.itemValue,label:e.label,disabled:e.disabled,error:e.error,"error-messages":e.errorMessages,clearable:"","return-object":"","hide-no-data":"","no-filter":"","onUpdate:modelValue":v,"onUpdate:search":b,"onClick:clear":p},null,8,["model-value","items","loading","search-input","placeholder","item-title","item-value","label","disabled","error","error-messages"])}}});export{T as _};
