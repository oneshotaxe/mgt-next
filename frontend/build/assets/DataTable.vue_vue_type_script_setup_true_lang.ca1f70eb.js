import{g as $}from"./get.028abc87.js";import{d as M,E as i,o,c as l,a as p,w as f,l as d,F as m,m as g,t as k,f as y,r as u,q as x,b,p as j,e as q,n as L}from"./index.e656cd4f.js";const U={class:"data-table"},W=d("th",{width:"72px"},null,-1),A=["onClick"],G=d("td",null,null,-1),H={key:2},J={class:"d-flex align-center justify-end"},O={class:"pr-4"},R=M({__name:"DataTable",props:{columns:null,rows:null,loading:{type:Boolean},pageSize:{default:10},page:{default:1},order:null,itemKey:{default:"id"},serverTotal:{default:0}},emits:["update:order","update:page","row-click"],setup(s,{emit:h}){const r=s,C=i(()=>Math.ceil(r.serverTotal/r.pageSize)),S=i(()=>(r.page-1)*r.pageSize+1),z=i(()=>Math.min(r.page*r.pageSize,r.serverTotal)),V=i(()=>`${S.value} - ${z.value} \u0438\u0437 ${r.serverTotal}`),T=i(()=>{var e,n;return(n=(e=r.order)==null?void 0:e.split(" "))==null?void 0:n[0]}),B=i(()=>{var e,n;return(n=(e=r.order)==null?void 0:e.split(" "))==null?void 0:n[1]}),K=e=>{if(!!e){if(e===T.value){h("update:order",`${e} ${B.value==="asc"?"desc":"asc"}`);return}h("update:order",`${e} asc`)}},w=()=>`${Math.random()*50+50}%`,c=(e,n)=>$(e,n.key),_=(e,n)=>{const v=c(e,n);return n.format?n.format(v):v};return(e,n)=>{const v=u("skeletor"),N=u("v-icon"),D=u("v-btn"),E=u("router-link"),F=u("v-table"),I=u("v-pagination");return o(),l("div",U,[p(F,null,{default:f(()=>[d("thead",null,[d("tr",null,[W,(o(!0),l(m,null,g(s.columns,t=>(o(),l("th",{key:t.key,class:x({"orderable-column":!!t.orderKey}),onClick:a=>K(t.orderKey)},k(t.title),11,A))),128))])]),d("tbody",null,[s.loading?(o(!0),l(m,{key:0},g(s.pageSize,t=>(o(),l("tr",{key:t},[G,(o(!0),l(m,null,g(s.columns,a=>(o(),l("td",{key:a.key},[d("span",null,[p(v,{width:w()},null,8,["width"])])]))),128))]))),128)):(o(!0),l(m,{key:1},g(s.rows,t=>(o(),l("tr",{key:y($)(t,s.itemKey)},[d("td",null,[p(D,{rounded:"",icon:"",flat:"",size:"small",onClick:a=>e.$emit("row-click",t)},{default:f(()=>[p(N,null,{default:f(()=>[b("mdi-arrow-right")]),_:1})]),_:2},1032,["onClick"])]),(o(!0),l(m,null,g(s.columns,a=>(o(),l("td",{key:a.key},[e.$slots[`item-${a.key}`]?j(e.$slots,`item-${a.key}`,{key:0,column:a,row:t,value:c(t,a)}):c(t,a)&&a.to?(o(),q(E,{key:1,to:a.to(c(t,a),t)},{default:f(()=>[b(k(_(t,a)),1)]),_:2},1032,["to"])):c(t,a)?(o(),l("span",H,k(_(t,a)),1)):L("",!0)]))),128))]))),128))])]),_:3}),d("div",J,[d("div",O,k(y(V)),1),p(I,{dense:"",density:"comfortable","model-value":s.page,length:y(C),"total-visible":5,"onUpdate:modelValue":n[0]||(n[0]=t=>e.$emit("update:page",t))},null,8,["model-value","length"])])])}}});export{R as _};
