import{j as I,M as g,O as h,E as o,y as M,C as O,u as D,R as l,N as u,h as _}from"./index.0cc843cd.js";import{u as L,f as R,a as E,r as N,b as i}from"./dayjs.565fdc9c.js";const T=t=>{const{t:s}=I(),d=_(),v=g(),f=h(),m=o(()=>l[u.ADMIN_COLUMN_LIST]),n=p=>l[u.ADMIN_COLUMN_VIEW](p),a=o(()=>t.value?n(t.value):m.value),e=M(!1),r=O({userId:void 0,title:""}),A=o(()=>({userId:{required:N},title:{required:N}})),y=L(A,r),k=o(()=>[{key:"save",text:s("actions.save"),buttonType:"submit",type:"PRIMARY",loading:e.value},{key:"cancel",text:s("actions.cancel"),to:a.value}]);return{loading:e,model:r,v$:y,actions:k,save:async()=>{if(!!await y.value.$validate())return v.confirm(s("dialogs.saveConfirm"),()=>(e.value=!0,(t.value?i.columns._id.put(t.value,r).then(()=>t.value):i.columns._id.post(r)).then(C=>(f.success(s("alerts.saveSuccess")),d.push(n(C)))).finally(()=>{e.value=!1})))},fetch:()=>(e.value=!0,i.columns._id.get(t.value).then(p=>Object.assign(r,p)).finally(()=>e.value=!1))}},x=()=>{D();const{t}=I(),s=_(),d=o(()=>l[u.ADMIN_COLUMN_CREATOR]),v=e=>l[u.ADMIN_COLUMN_VIEW](e),f=M([{key:"user",title:t("fields.user"),format:e=>e.nick,to:e=>l[u.ADMIN_COLUMN_VIEW](e.id)},{key:"title",orderKey:"title",title:t("fields.title")},{key:"createdAt",orderKey:"created_at",title:t("fields.createdAt"),format:R},{key:"updatedAt",title:t("fields.updatedAt"),format:R}]),m=E({order:"created_at desc",page:1,pageSize:10,fetch:i.columns.get}),n=o(()=>[{key:"create",to:d.value,text:t("actions.create"),type:"PRIMARY",prependIcon:"mdi-plus"}]);return{columns:f,table:m,actions:n,onRowClick:e=>s.push(v(e))}},w=t=>{const{t:s}=I(),d=_(),v=g(),f=h(),m=o(()=>l[u.ADMIN_COLUMN_EDITOR](t.value)),n=o(()=>l[u.ADMIN_COLUMN_LIST]),a=M(!1),e=O({userId:void 0,title:""}),r=M([{key:"user",title:s("fields.user"),format:c=>c.nick,to:c=>l[u.ADMIN_COLUMN_VIEW](c.id)},{key:"title",title:s("fields.title")},{key:"createdAt",title:s("fields.createdAt"),format:R},{key:"updatedAt",title:s("fields.updatedAt"),format:R}]),A=o(()=>[{key:"edit",text:s("actions.edit"),to:m.value,type:"PRIMARY"},{key:"remove",text:s("actions.remove"),click:y,type:"ERROR",loading:a.value},{key:"cancel",text:s("actions.toList"),to:n.value}]),y=()=>v.confirm(s("dialogs.removeConfirm"),()=>(a.value=!0,i.columns._id.delete(t.value).then(()=>(f.success(s("alerts.removeSuccess")),d.push(n.value))).finally(()=>{a.value=!1})));return{loading:a,model:e,fields:r,actions:A,fetch:()=>(a.value=!0,i.columns._id.get(t.value).then(c=>Object.assign(e,c)).finally(()=>a.value=!1))}};export{T as a,w as b,x as u};
