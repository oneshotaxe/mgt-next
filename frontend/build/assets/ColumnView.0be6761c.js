import{d as N,j as O,M as z,E as I,k as R,o as V,c as j,l as w,t as F,f as a,a as o,w as e,r as m,R as p,N as r,b as l,i as J,L as v}from"./index.29b21037.js";import{_ as P,a as f,b as Y,F as _,c as $,d as U,e as G,f as q}from"./DialogMonth.vue_vue_type_script_setup_true_lang.a23a1551.js";import{_ as H,b as i}from"./dayjs.65f00da0.js";import{_ as K}from"./DataBlock.vue_vue_type_script_setup_true_lang.d9da02e0.js";import{a as Q}from"./composable.764a2b44.js";import"./get.2a4910f9.js";const W=w("h2",null,"\u0414\u0430\u043D\u043D\u044B\u0435",-1),X=w("h2",null,"\u0412\u044B\u0433\u0440\u0443\u0437\u043A\u0438",-1),Z=w("h2",null,"\u0420\u0435\u0437\u0435\u0440\u0432\u043D\u043E\u0435 \u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435",-1),lu=N({__name:"ColumnView",setup(uu){const{t:g}=O(),c=z(),B=J(),t=I(()=>+B.params.id),{loading:b,model:x,fields:y,actions:h,fetch:A}=Q(t),D=()=>{c.open({width:450,component:P,onApply:async n=>{if(!n||n.length===0)return;const s=n[0];return i.columns._id.upload(t.value,JSON.parse(await s.text()))}})},C=async()=>{c.open({width:450,component:f,onApply:async n=>{const s=await i.columns._id.journal(t.value,n),u=await Y(s);await _.saveAs(new Blob([u]),"magazine.xlsx")}})},M=async()=>{c.open({width:450,component:f,onApply:async n=>{const s=await i.columns._id.journal(t.value,n),u=await $(s);await _.saveAs(new Blob([u]),"magazine mini.xlsx")}})},T=async()=>{c.open({width:450,component:f,onApply:async n=>{const s=await i.columns._id.journal(t.value,n),u=await U(s);await _.saveAs(new Blob([u]),"magazine new.xlsx")}})},S=async()=>{c.open({width:450,component:f,onApply:async n=>{const s=await i.columns._id.agreement(t.value),u=await v.get("/agree.xlsx",{responseType:"arraybuffer"}),d=await G(u.data,s,n);await _.saveAs(new Blob([d]),"agreement.xlsx")}})},k=async()=>{const n=await i.columns._id.dump(t.value);console.log(n);const s=await v.get("/dump.xlsx",{responseType:"arraybuffer"}),u=await q(s.data,n);await _.saveAs(new Blob([u]),"dump.xlsx")};return R(()=>{t.value&&A()}),(n,s)=>{const u=m("v-list-item"),d=m("v-list"),E=m("v-col"),L=m("v-row");return V(),j("div",null,[w("h1",null,F(a(g)("columns.viewTitle")),1),o(a(K),{fields:a(y),model:a(x),loading:a(b)},null,8,["fields","model","loading"]),o(a(H),{actions:a(h),class:"pt-8"},null,8,["actions"]),o(L,{class:"pt-8"},{default:e(()=>[o(E,{cols:"12",md:"4"},{default:e(()=>[W,o(d,null,{default:e(()=>[o(u,{to:a(p)[a(r).EMPLOYEE_DRIVER_LIST](a(t))},{default:e(()=>[l("\u0412\u043E\u0434\u0438\u0442\u0435\u043B\u0438")]),_:1},8,["to"]),o(u,{to:a(p)[a(r).EMPLOYEE_BUS_LIST](a(t))},{default:e(()=>[l("\u0410\u0432\u0442\u043E\u0431\u0443\u0441\u044B")]),_:1},8,["to"]),o(u,{to:a(p)[a(r).EMPLOYEE_ROUTE_LIST](a(t))},{default:e(()=>[l("\u041C\u0430\u0440\u0448\u0440\u0443\u0442\u044B")]),_:1},8,["to"]),o(u,{to:a(p)[a(r).EMPLOYEE_GATE_LIST](a(t))},{default:e(()=>[l("\u0412\u044B\u0445\u043E\u0434\u044B")]),_:1},8,["to"])]),_:1})]),_:1}),o(E,{cols:"12",md:"4"},{default:e(()=>[X,o(d,null,{default:e(()=>[o(u,{onClick:C},{default:e(()=>[l("\u0416\u0443\u0440\u043D\u0430\u043B")]),_:1}),o(u,{onClick:M},{default:e(()=>[l("\u0416\u0443\u0440\u043D\u0430\u043B \u043C\u0438\u043D\u0438")]),_:1}),o(u,{onClick:T},{default:e(()=>[l("\u041D\u043E\u0432\u044B\u0439 \u0436\u0443\u0440\u043D\u0430\u043B")]),_:1}),o(u,{onClick:S},{default:e(()=>[l("\u0421\u043E\u0433\u043B\u0430\u0441\u0438\u0435")]),_:1})]),_:1})]),_:1}),o(E,{cols:"12",md:"4"},{default:e(()=>[Z,o(d,null,{default:e(()=>[o(u,{onClick:D},{default:e(()=>[l("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C")]),_:1}),o(u,{onClick:k},{default:e(()=>[l("\u0412\u044B\u0433\u0440\u0443\u0437\u0438\u0442\u044C")]),_:1})]),_:1})]),_:1})]),_:1})])}}});export{lu as default};
